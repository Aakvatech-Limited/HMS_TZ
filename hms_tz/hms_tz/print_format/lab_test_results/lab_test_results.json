{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2021-05-08 10:18:45.289417",
 "css": ".print-format {\r\n    padding: 0.5in;\r\n}\r\n\r\nh1 {\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.print-format td, .print-format th {\r\n    padding: 1px !important;\r\n}\r\n\r\n",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Lab Test",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\" style=\\\"display: none; padding: 0.25px;\\\">\\t\\n&nbsp;\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"padding-bottom: 3px; margin-top: 0px; margin-bottom: 0px; border: 0;\\\">\\r\\n    <div class=\\\"col-xs-6 column-break\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-xs-4 text-left\\\">\\r\\n              <label>Patient No:</label>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-7  value\\\">\\r\\n              {{ doc.patient }}\\r\\n            </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-xs-4 text-left\\\">\\r\\n          <label>Patient Name</label>\\r\\n        </div>\\r\\n        {% if doc.patient_name %}\\r\\n            <div class=\\\"col-xs-7  value\\\">\\r\\n              {{ doc.patient_name }}\\r\\n            </div>\\r\\n        {%- endif -%}\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-xs-4 text-left\\\">\\r\\n              <label>Age</label>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-7  value\\\">\\r\\n                {% set dob = frappe.db.get_value(\\\"Patient\\\", doc.patient, ['dob'])  %}\\r\\n                 {% set now  = frappe.utils.nowdate() %}\\r\\n                 {% set diff = frappe.utils.date_diff(now, dob) %}\\r\\n                    {{ diff//365 }} years\\r\\n            </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-xs-4 text-left\\\">\\r\\n          <label>Gender</label>\\r\\n        </div>\\r\\n        {% if doc.patient_sex %}\\r\\n            <div class=\\\"col-xs-7  value\\\">\\r\\n              {{ doc.patient_sex }}\\r\\n            </div>\\r\\n        {% endif %}\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"col-xs-6 column-break\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-xs-4 text-left\\\">\\r\\n          <label>Practitioner</label>\\r\\n        </div>\\r\\n        {% if doc.practitioner_name %}\\r\\n            <div class=\\\"col-xs-7  text-left value\\\">\\r\\n              {{ doc.practitioner_name }}\\r\\n            </div>\\r\\n        {% else %}\\r\\n            {% if doc.referring_practitioner_name %}\\r\\n                <div class=\\\"col-xs-7  text-left value\\\">\\r\\n                    {{ doc.referring_practitioner_name }}\\r\\n                </div>\\r\\n            {% endif %}\\r\\n        {%- endif -%}\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-xs-4 text-left\\\">\\r\\n            <label>Result Date</label>\\r\\n            </div>\\r\\n            {% if doc.result_date %}\\r\\n                <div class=\\\"col-xs-7  text-left value\\\">\\r\\n                  {{ frappe.utils.formatdate(doc.result_date, \\\"dd-mmmm-yyyy\\\") }}\\r\\n                </div>\\r\\n          {% endif %}\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-xs-4 text-left\\\">\\r\\n            <label>Encounter No:</label>\\r\\n            </div>\\r\\n            {% if doc.ref_docname %}\\r\\n                <div class=\\\"col-xs-7  text-left value\\\">\\r\\n                  {{ doc.ref_docname }}\\r\\n                </div>\\r\\n          {% endif %}\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-xs-4 text-left\\\">\\r\\n            <label>No. of Tests</label>\\r\\n            </div>\\r\\n            {% set no_of_tests = frappe.db.get_all(\\\"Lab Test\\\", filters={'ref_docname': frappe.db.get_value(\\\"Patient Encounter\\\",doc.ref_docname, ['name'])}, fields=['name']) %}\\r\\n            {% if no_of_tests %}\\r\\n                <div class=\\\"col-xs-7  text-left value\\\">\\r\\n                  {{ no_of_tests|length }}\\r\\n                </div>\\r\\n          {% endif %}\\r\\n      </div>\\r\\n    </div>\\r\\n </div>\\r\\n <hr><br>\\r\\n<div style=\\\"padding-bottom: 5px;margin-bottom: 5px;border-bottom: 0px solid #d1d8dd;\\\">\\r\\n        <h1 class=\\\"text-center\\\"><strong>LAB TEST RESULTS</strong></h1>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div style=\\\"margin-top: 0px; margin-bottom: 0px; border: 0;border-top: 0px solid #d1d8dd; border-top: 0px solid #d1d8dd;\\\">\\r\\n    {% set tests = frappe.db.get_all(\\\"Lab Test\\\", filters={'ref_docname': frappe.db.get_value(\\\"Patient Encounter\\\",doc.ref_docname, ['name'])}, fields=['name', 'docstatus'], order_by='department asc') %}\\r\\n\\t{% set var = {'old': 'Test'} %}\\r\\n    {% for test in tests %}\\r\\n        {% set depart = frappe.db.get_value(\\\"Lab Test\\\", test, ['department']) %}\\r\\n        {% if depart != var['old'] %}\\r\\n\\t\\t\\t<h4 class=\\\"text-uppercase text-left\\\" style=\\\"margin-top: 0px; margin-bottom: 0px;padding: 0px !important;\\\">\\r\\n\\t\\t\\t\\t<b>{{ depart }}</b>\\r\\n\\t\\t\\t</h4>\\r\\n\\t\\t{% endif %}\\r\\n\\t\\t{% set d = var.update({'old': depart }) %}\\r\\n\\r\\n        {% set test_name = frappe.db.get_value(\\\"Lab Test\\\", test, ['lab_test_name']) %}\\r\\n        {% set normal_results = frappe.get_all(\\\"Normal Test Result\\\", {'parent': test.name}, ['lab_test_name','lab_test_event', 'result_value', 'normal_range', 'detailed_normal_range', 'result_status']) %}\\r\\n        {% set descriptive_results = frappe.get_all(\\\"Descriptive Test Result\\\", {'parent': test.name}, ['lab_test_particulars', 'result_component_option', 'result_value']) %}\\r\\n        {% set organism_results = frappe.get_all(\\\"Organism Test Result\\\", {'parent': test.name}, ['organism', 'colony_population', 'colony_uom']) %}\\r\\n        {% set sensitivity_results = frappe.get_all(\\\"Sensitivity Test Result\\\", {'parent': test.name}, ['antibiotic', 'antibiotic_sensitivity']) %}\\r\\n       \\r\\n        \\r\\n        <h5 class=\\\"text-left\\\" style=\\\"font-size: 10pt; padding: 0px;margin-top: 0px; margin-bottom: 4px;padding: 0px !important;\\\">Test Name:<u style=\\\"text-transform:uppercase\\\"><strong>{{ test_name }}</strong></u></h5>\\r\\n        \\r\\n        {% if test.docstatus==1 %}\\r\\n            {% if normal_results %}\\r\\n                <table class=\\\"table\\\" style=\\\"padding-bottom: 0px; margin-top: 0px; margin-bottom: 8px; padding: 0px !important;\\\">\\r\\n                    <tbody style=\\\"width: 100%; height: auto;\\\">\\r\\n                        <tr>\\r\\n                            <th class=\\\"text-left\\\" style=\\\"width:30%; text-align: left; border:none; padding: 0px;\\\">Name of Test</th>\\r\\n                            <th class=\\\"text-left\\\" style=\\\"width:25%; text-align: left; border:none; padding: 0px;\\\">Result</th>\\r\\n                            <th class=\\\"text-left\\\" style=\\\"width:20%; text-align: left; border:none; padding: 0px;\\\">Status</th>\\r\\n                            <th class=\\\"text-left\\\" style=\\\"width:25%; text-align: left; border:none; padding: 0px;\\\">Normal Range</th>\\r\\n                        </tr>\\r\\n                        {% for row in normal_results %}\\r\\n                            {% if ( row.result_status==\\\"N\\\" or row.result_status==\\\" \\\") %}\\r\\n                                <tr>\\r\\n                                    <td style=\\\"width:30%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.lab_test_name %}{{ row.lab_test_name }}{%endif%}\\r\\n                                    </td>\\r\\n                                    <td style=\\\"width:25%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.result_value %}{{ row.result_value }}{%endif%}\\r\\n                                    </td>\\r\\n                                    <td style=\\\"width:20%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.result_status %}{{ row.result_status }}{%endif%}\\r\\n                                    </td>\\r\\n                                    <td style=\\\"width: 25%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.detailed_normal_range %}\\r\\n                                            {{ row.detailed_normal_range }}\\r\\n                                        {% else %}\\r\\n                                            {{ row.normal_range }}\\r\\n                                        {%endif%}\\r\\n                                    </td>\\r\\n                                </tr>\\r\\n                            {% else %}\\r\\n                                <tr>\\r\\n                                    <td style=\\\"width:30%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.lab_test_name %}<b>{{ row.lab_test_name }}</b>{%endif%}\\r\\n                                    </td>\\r\\n                                    <td style=\\\"width:25%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.result_value %}<b>{{ row.result_value }}</b>{%endif%}\\r\\n                                    </td>\\r\\n                                    <td style=\\\"width:20%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.result_status %}<b>{{ row.result_status }}</b>{%endif%}\\r\\n                                    </td>\\r\\n                                    <td style=\\\"width: 25%;text-align: left;border:none; padding: 0px !important;\\\">\\r\\n                                        {% if row.detailed_normal_range %}\\r\\n                                            <b>{{ row.detailed_normal_range }}</b>\\r\\n                                        {% else %}\\r\\n                                            <b>{{ row.normal_range }}</b>\\r\\n                                        {%endif%}\\r\\n                                    </td>\\r\\n                                </tr>\\r\\n                            {% endif %}\\r\\n                        {% endfor %}\\r\\n                    </tbody>\\r\\n                </table>\\r\\n            {% endif %}\\r\\n        \\r\\n        \\r\\n            {% if descriptive_results %}\\r\\n                <table class=\\\"table\\\" style=\\\"padding-bottom: 0px;margin-top: 0px; margin-bottom: 8px;padding: 0px !important;\\\">\\r\\n                    <tbody style=\\\"width: 100%; height: auto;\\\">\\r\\n                        <tr>\\r\\n                            <th style=\\\"width: 40%;text-align: left;border:none;\\\">Name of Test</th>\\r\\n                            <th style=\\\"width: 20%;text-align: center;border:none;\\\"></th>\\r\\n                            <th style=\\\"width: 40%;text-align: left;border:none;\\\">Result Component Option</th>\\r\\n                        </tr>\\r\\n                        {% for row in descriptive_results %}\\r\\n                            <tr>\\r\\n                                <td style=\\\"width: 40%;text-align: left;border:none;padding: 0px !important;\\\">\\r\\n                                    {% if row.lab_test_particulars %}{{ row.lab_test_particulars }}{%endif%}\\r\\n                                </td>\\r\\n                                 <td style=\\\"width: 20%;text-align: center;border:none;padding: 0px !important;\\\">\\r\\n                                    <!-- {% if row.result_value %}{{ row.result_value}}{%endif%}-->\\r\\n                                </td>\\r\\n                                 <td style=\\\"width: 40%;text-align: left;border:none;padding: 0px !important;\\\">\\r\\n                                     {% if row.result_component_option %}{{ row.result_component_option }}{%endif%}\\r\\n                                </td>\\r\\n                            </tr>   \\r\\n                        {% endfor %}\\r\\n                        \\r\\n                  </tbody>\\r\\n                </table>\\r\\n            {% endif %}\\r\\n       \\r\\n            {% if organism_results %}\\r\\n                <table class=\\\"table\\\" style=\\\"padding-bottom: 0px;margin-top: 0px; margin-bottom: 8px;padding: 0px !important;\\\">\\r\\n                    <tbody style=\\\"width: 100%; height: auto;\\\">\\r\\n                        <tr>\\r\\n                            <th class=\\\"text-left\\\">Name of Organism</th>\\r\\n                            <th class=\\\"text-center\\\">Colony Populataion</th>\\r\\n                            <th class=\\\"text-center\\\">Colony UOM</th>\\r\\n                        </tr>\\r\\n                        {% for row in organism_results %}\\r\\n                            <tr>\\r\\n                                <td style=\\\"width: 40%;text-align: left;border:none;padding: 0px !important;\\\">\\r\\n                                     {% if row.organism %}<b>{{ row.organism }}</b>{%endif%}\\r\\n                                </td>\\r\\n                                <td style=\\\"width: 25%;text-align: center;border:none;padding: 0px !important;\\\">\\r\\n                                     {% if row.colony_population %}{{ row.colony_population }}{%endif%}\\r\\n                                </td>\\r\\n                                <td style=\\\"width: 35%;text-align: center;border:none;padding: 0px !important;\\\">\\r\\n                                     {% if row.colony_uom %}{{ row. colony_uom}}{%endif%}\\r\\n                                </td>\\r\\n                            </tr>   \\r\\n                        {% endfor %}\\r\\n                    </tbody>\\r\\n                </table>\\r\\n            {% endif %}\\r\\n        \\r\\n       \\r\\n            {% if sensitivity_results %}\\r\\n            <table class=\\\"table\\\" style=\\\"padding-bottom: 0px;margin-top: 0px; margin-bottom: 8px;padding: 0px !important;\\\">\\r\\n                    <tbody style=\\\"width: 100%; height: auto;\\\">\\r\\n                        <tr>\\r\\n                            <th class=\\\"text-left\\\">Name of Antibiotic</th>\\r\\n                            <th class=\\\"text-center\\\"></th>\\r\\n                            <th class=\\\"text-center\\\">Sensitivity</th>\\r\\n                        </tr>\\r\\n                        {% for row in sensitivity_results %}\\r\\n                            <tr>\\r\\n                                <td style=\\\"width: 30%;text-align: left;border:none;padding: 0px !important;\\\">\\r\\n                                      {% if row.antibiotic %}<b>{{ row.antibiotic }}</b>{%endif%}\\r\\n                                </td>\\r\\n                                <td style=\\\"width: 20%;text-align: center;border:none;padding: 0px !important;\\\"></td>\\r\\n                                <td style=\\\"width: 45%;text-align: center;border:none;padding: 0px !important;\\\">\\r\\n                                     {% if row.antibiotic_sensitivity %}{{ row. antibiotic_sensitivity}}{%endif%}\\r\\n                                </td>\\r\\n                            </tr>   \\r\\n                        {% endfor %}\\r\\n                    </tbody>\\r\\n                </table>\\r\\n            {% endif %}\\r\\n        {% else %}\\r\\n            <center><i><b>This lab test is still awaiting results.</b></i></center>\\r\\n        {% endif %}\\r\\n        <hr>\\r\\n    {% endfor %}\\r\\n</div>\\r\\n\\r\\n\\r\\n\"}]",
 "html": "",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2021-06-01 15:37:31.074177",
 "modified_by": "info@aakvatech.com",
 "module": "Hms Tz",
 "name": "Lab Test Results",
 "owner": "info@aakvatech.com",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}